# 待处理的问题list

---

## 数据库和缓存数据一致性

一般都是先更新数据库，再删除缓存，这种出现脏读的概率很小。

高并发情况下，可以使用同一事务来做更新数据库和删除缓存的操作，采用TCC消息补偿机制，来解决极端情况下的数据不一致问题。

- 针对第二步删除缓存可能失败的问题，添加删除缓存重试机制，如果删除缓存失败，则把删除失败的key放入mq，消费mq，重试删除缓存的操作。（但会造成业务代码入侵）
- 通过数据库的binlog来异步删除key，



https秘钥交换过程？
http http2的区别？？

## 网络的7层协议  OSI
7. 应用层
6. 表示层  传输文字、图片、视频
5. 会话层  建立长连接
4. 传输层  TCP UDP 
3. 网络层  IP协议
2. 数据链路层
1. 物理层



DNS解析

TCP三次握手四次挥手??

## tcp、udp的区别

tcp是一种面向连接的、可靠的、基于字节流的传输层通信协议。
udp是一种无连接的传输层协议，

1. tcp面向连接，可靠性高。udp是基于非连接的，可靠性低。
2. tcp需要三次握手、重新确认等连接过程，会有延时，实时性差，同时过程复杂。udp没有建立连接的过程，因此实时性较强。
3. tcp报头比udp复杂，故实际包含的用户数据较少。tcp在IP协议的基础上添加了序号机制、确认机制、超时重试机制等，保证了传输的可靠性，不会出现丢包现象，而udp可能会丢包。
4. tcp开销多，udp开销少。
5. tcp保证数据顺序。udp不保证。
6. 每条tcp连接只能是点对点的。udp支持一对一、一对多、多对一、多对多的交互通信。

#### 应用场景选择

- 对实时性要求高和高速传输的场合下使用UDP;在可靠性要求低，追求效率的情况下使用UDP;
- 需要传输大量数据且对可靠性要求高的情况下使用TCP



进程间的通信方式



## 基本类型存储在jvm的位置，string呢？
栈内存用来存储的是基本类型和引用变量(即对象的变量名字)

## ==和equals的区别

== 可以比较基础类型，比较的是值。如果比较引用类型则比较的是引用地址
equals 比较的是内容，一般自定义对象需要重写equals()方法


## 线程中断
interrupt方法

---
<!-- ========================================= -->
平时的学习方式？ 有什么爱好
自己的优势和缺点
怎么提升技术

工作期间最大的挑战
<!-- ========================================= -->

整个系统设计是什么样的？由哪些模块组成？模块之间的关系？模块的边界问题？怎么权衡？存在的问题，怎么优化？




项目中碰到的问题，最好说框架本身问题，能提现个人能力，也避免问题太低级被面试官看low，刚好之前有发现一个dubbo的bug，所以这问题应该回答的还可以。

设计秒杀系统

碰到哪些技术难点？怎么解决？有没有参考其他大厂？其他大厂方案什么样的？有没有关注阿里这边最新的技术？


---

## servlet是否线程安全？如何改造？
Servlet运行过程：
Servlet程序是由WEB服务器调用，web服务器收到客户端的Servlet访问请求后：
1. Web服务器首先检查是否已经装载并创建了该Servlet的实例对象。如果是，则直接执行第④步，否则，执行第②步。
2. 装载并创建该Servlet的一个实例对象。
3. 调用Servlet实例对象的init()方法。
4. 创建一个用于封装HTTP请求消息的HttpServletRequest对象和一个代表HTTP响应消息的HttpServletResponse对象，然后调用Servlet的service()方法并将请求和响应对象作为参数传递进去。
⑤WEB应用程序被停止或重新启动之前，Servlet引擎将卸载Servlet，并在卸载之前调用Servlet的destroy()方法。

通过第二步，我们可以知道，创建的Servlet对象只有一个。

#### 改造：
避免使用实例变量，改为局部变量实现线程安全。
从Java 内存模型也可以知道，方法中的临时变量是在栈上分配空间，而且每个线程都有自己私有的栈空间，所以它们不会影响线程的安全。


## 实现一个懒加载单例双重校验锁为什么需要双重校验？

两次判空的原因：

1、如果单例已经创建了，直接调用synchronized加锁比较耗性能。所以首先判断有没有创建，没创建再加锁。
2、第二层非空检查的原因是在同时多个线程调用时，A线程获得锁并创建成功实例，之后释放锁，前面一起竞争的B线程获得锁，首先判断非空，代表已经创建了，所以不会继续去创建实例。


## 浏览器输入一个url到页面渲染的整个过程？
- DNS解析，根据域名找到ip地址
- 浏览器向服务器发送一个HTTP请求（CDN缓存）
- 服务器处理http请求
- 服务器返回响应数据
- 页面渲染




## 12306的架构设计


