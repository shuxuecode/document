基于Zookeeper实现分布式锁的步骤如下：

1、创建一个目录mylock；

2、创建A想获取锁就在mylock目录下创建临时顺序节点；

3、获取mylock目录下所有的子节点，然后获取比自己小的兄弟节点，如果不存在，则说明当前线程顺序号最小，获取锁；

4、线程B获取所有节点，判断自己不是最小节点，设置监听比自己次小的节点；

5、线程A处理完，删除自己的节点，线程B监听到变更事件，判断自己是不是最小节点，如果是，获取锁。

这里推荐一个Apache的开源库Curator，它是一个ZooKeeper客户端，Curator提供的InterProcessMutex是分布式锁的实现，acquire方法用于获取锁，release方法用于释放锁。

优点：具备高可用、可重入、阻塞锁特性，可解决失效死锁的问题。

缺点：因为需要频繁的创建和删除节点，性能上不如Redis方式。